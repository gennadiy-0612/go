/**
 * –ö–ª–∞—Å SliderElement
 * –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é —Ç–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫—É –æ–¥–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ —Å–ª–∞–π–¥–µ—Ä–∞.
 */
class SliderElement {
    /**
     * @param {string} selector - CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä –µ–ª–µ–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, '.fade').
     * @param {number} index - –Ü–Ω–¥–µ–∫—Å –µ–ª–µ–º–µ–Ω—Ç–∞ –≤ NodeList, —è–∫–∏–π –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–±—Ä–∞—Ç–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 2).
     */
    constructor(selector, index = 0) {
        this.selector = selector;
        this.index = index;
        this.element = this._findElement(); // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ DOM-–µ–ª–µ–º–µ–Ω—Ç —Ç—É—Ç
        
        // –Ø–∫—â–æ –µ–ª–µ–º–µ–Ω—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ, –º–∏ –Ω–µ –º–æ–∂–µ–º–æ –ø—Ä–æ–¥–æ–≤–∂—É–≤–∞—Ç–∏
        if (!this.element) {
            console.error(`–ï–ª–µ–º–µ–Ω—Ç –∑ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–º '${selector}' —Ç–∞ —ñ–Ω–¥–µ–∫—Å–æ–º ${index} –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.`);
            // –£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É this.element –±—É–¥–µ null
        }
    }

    /**
     * –ü—Ä–∏–≤–∞—Ç–Ω–∏–π –¥–æ–ø–æ–º—ñ–∂–Ω–∏–π –º–µ—Ç–æ–¥ –¥–ª—è –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è DOM-–µ–ª–µ–º–µ–Ω—Ç–∞.
     * @returns {HTMLElement | null} –ó–Ω–∞–π–¥–µ–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç –∞–±–æ null.
     */
    _findElement() {
        // –ó–Ω–∞—Ö–æ–¥–∏–º–æ –≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä—É
        const allElements = document.querySelectorAll(this.selector);
        
        // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –µ–ª–µ–º–µ–Ω—Ç –∑–∞ –≤–∫–∞–∑–∞–Ω–∏–º —ñ–Ω–¥–µ–∫—Å–æ–º –∞–±–æ null
        return allElements[this.index] || null; 
    }

    /**
     * –ü—É–±–ª—ñ—á–Ω–∏–π –º–µ—Ç–æ–¥ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤ –ø–æ–¥—ñ–π.
     * –¢—É—Ç –º–∏ —Ç–∞–∫–æ–∂ –¥–æ–¥–∞—î–º–æ –ª–æ–≥—ñ–∫—É –æ–±—Ä–æ–±–Ω–∏–∫–∞ –∫–ª—ñ–∫—É.
     */
    addEvents() {
        // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —ñ—Å–Ω—É—î –µ–ª–µ–º–µ–Ω—Ç
        if (this.element) {
            
            // üí° –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ bind(this), —â–æ–± –º–µ—Ç–æ–¥ handleClick –∑–∞–≤–∂–¥–∏ –º–∞–≤ –¥–æ—Å—Ç—É–ø –¥–æ this –æ–±'—î–∫—Ç–∞ SliderElement.
            this.element.addEventListener('click', this.handleClick.bind(this));
            
            console.log("–û–±—Ä–æ–±–Ω–∏–∫ –∫–ª—ñ–∫—É –¥–æ–¥–∞–Ω–æ.");
            console.log("–ï–ª–µ–º–µ–Ω—Ç, –¥–æ —è–∫–æ–≥–æ –¥–æ–¥–∞–Ω–æ –æ–±—Ä–æ–±–Ω–∏–∫:", this.element);
        } else {
             console.warn("–ù–µ–º–æ–∂–ª–∏–≤–æ –¥–æ–¥–∞—Ç–∏ –æ–±—Ä–æ–±–Ω–∏–∫, –µ–ª–µ–º–µ–Ω—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.");
        }
    }
    
    /**
     * –ú–µ—Ç–æ–¥, —è–∫–∏–π –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø—Ä–∏ –∫–ª—ñ–∫—É.
     * @param {Event} event - –û–±'—î–∫—Ç –ø–æ–¥—ñ—ó.
     */
    handleClick(event) {
        console.log(`–ö–ª—ñ–∫ —Å–ø—Ä–∞—Ü—é–≤–∞–≤ –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç—ñ: ${this.selector}[${this.index}]`);
        console.log(`–ü–æ–¥—ñ—è –≤—ñ–¥–±—É–ª–∞—Å—è –Ω–∞:`, event.currentTarget);
        // –¢—É—Ç –º–æ–∂–µ –±—É—Ç–∏ –≤–∞—à–∞ –ª–æ–≥—ñ–∫–∞ —Å–ª–∞–π–¥–µ—Ä–∞
    }
}


/**
 * –û–±'—î–∫—Ç App (–¢–æ—á–∫–∞ –≤—Ö–æ–¥—É)
 * –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é –≤—Å—ñ—î—ó –ø—Ä–æ–≥—Ä–∞–º–∏.
 */
const App = {
    // –í–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å, –¥–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏–º–µ—Ç—å—Å—è –Ω–∞—à –µ–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—É
    sliderInstance: null,

    /**
     * –ú–µ—Ç–æ–¥ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó, —è–∫–∏–π –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è DOM.
     */
    init() {
        console.log("DOM –ø–æ–≤–Ω—ñ—Å—Ç—é –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è...");
        
        // 1. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—É
        // –ú–∏ —Ö–æ—á–µ–º–æ –∑–Ω–∞–π—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç –∑ –∫–ª–∞—Å–æ–º '.fade' –ø—ñ–¥ —ñ–Ω–¥–µ–∫—Å–æ–º 0.
        App.sliderInstancePrev = new SliderElement('.prev', 0); 
        App.sliderInstanceNext = new SliderElement('.next', 0); 

        // 2. –î–æ–¥–∞–≤–∞–Ω–Ω—è –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤ –ø–æ–¥—ñ–π (–≤–∏–∫–ª–∏–∫–∞—î–º–æ –º–µ—Ç–æ–¥ –∫–ª–∞—Å—É)
        if (App.sliderInstancePrev.element && App.sliderInstanceNext.element) {
            App.sliderInstancePrev.addEvents();
            App.sliderInstanceNext.addEvents();
        }
    }
};


// –ì–æ–ª–æ–≤–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–ª—è –∑–∞–ø—É—Å–∫—É: 
// –ü—Ä–∏–≤'—è–∑—É—î–º–æ –º–µ—Ç–æ–¥ App.init –¥–æ –ø–æ–¥—ñ—ó –ø–æ–≤–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç–∞.
document.addEventListener('DOMContentLoaded', App.init);